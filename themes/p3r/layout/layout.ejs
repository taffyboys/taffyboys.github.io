<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%- page.title || config.title %> - <%= config.author %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap');
        :root { --p3-blue: #0066ff; --p3-dark: #000b1a; }
        body { background-color: var(--p3-dark); color: white; font-family: 'Oswald', sans-serif; overflow-x: hidden; }
        .bg-gradient-animate {
            background: linear-gradient(135deg, #000b1a 0%, #001a3d 50%, #002e66 100%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
        .slanted-box { transform: skewX(-15deg); }
        .slanted-content { transform: skewX(15deg); }
        .shard { position: fixed; background: rgba(0, 102, 255, 0.15); clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 80%); z-index: -1; animation: float 8s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-30px) rotate(5deg); } }
        
        /* P3R 经典的切入动画 */
        @keyframes p3SlideIn {
            0% { transform: translateX(-40px) skewX(-15deg); opacity: 0; }
            100% { transform: translateX(0) skewX(0); opacity: 1; }
        }

        .animate-p3-slide {
            animation: p3SlideIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        /* 优化正文内的引用样式 */
        .prose blockquote {
            border-left: 4px solid #0066ff !important;
            background: #f0f7ff;
            padding: 1rem !important;
            font-style: italic;
        }

        .prose a {
            color: #0066ff;
            text-decoration: none;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            font-weight: bold;
        }
        .prose a:hover {
            border-bottom: 2px solid #00d9ff;
            background: rgba(0, 102, 255, 0.1);
        }

        /* 针对正文内容的深度定制 */
        .prose {
            color: #1a1a1a; /* 稍微加深文字颜色，提高易读性 */
        }

        /* 1. 让所有的二级标题带上色块和斜切感 */
        .prose h2 {
            background: #0066ff;
            color: white !important;
            padding: 0.5rem 1rem;
            transform: skewX(-10deg);
            display: inline-block;
            margin-top: 2rem !important;
            box-shadow: 6px 6px 0px #000b1a;
        }

        /* 2. 让三级标题带上底部装饰线 */
        .prose h3 {
            border-left: 6px solid #0066ff;
            padding-left: 0.75rem;
            font-style: italic;
            color: #0044cc !important;
            text-transform: uppercase;
        }

        /* 3. 代码块美化：加入“系统终端”感 */
        .prose pre {
            background: #dce2eb !important;
            border-left: 4px solid #00d9ff;
            border-top: 1px solid rgba(0, 217, 255, 0.2);
            box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        /* 行内代码 */
        .prose :not(pre) > code {
            background-color: #0066ff !important;
            color: white !important;
            padding: 0.1rem 0.4rem !important;
            font-style: normal !important;
        }
        .prose :not(pre) > code::before, .prose :not(pre) > code::after { content: "" !important; }

        /* 4. 让链接具有动态感 */
        .prose a {
            background: linear-gradient(0deg, #0066ff 2px, transparent 2px);
            transition: all 0.2s;
            font-weight: bold;
            color: #0066ff !important;
        }
        .prose a:hover {
            background: #0066ff;
            color: white !important;
        }
        .drop-shadow-blue-glow {
                filter: drop-shadow(0 0 8px rgba(0, 102, 255, 0.8)) 
                        drop-shadow(0 0 15px rgba(0, 217, 255, 0.4));
            }

            /* 模拟 P3R 的缓慢漂浮感 */
            @keyframes moonSway {
                0%, 100% { transform: rotate(-5deg) translate(0, 0); }
                50% { transform: rotate(5deg) translate(-5px, -5px); }
            }
            .animate-moon-sway {
                animation: moonSway 4s ease-in-out infinite;
            }

            /* 像素扫描线 */
            .bg-scanlines {
                background: linear-gradient(
                    to bottom,
                    transparent 50%,
                    rgba(0, 102, 255, 0.2) 50%
                );
                background-size: 100% 4px;
            }

            /* 针对侧边栏卡片的微调 */
            /* .slanted-box::after {
                content: "SYSTEM_MONITOR";
                position: absolute;
                bottom: 4px;
                left: 10px;
                font-size: 8px;
                color: rgba(0, 0, 0, 0.2);
                font-family: monospace;
            } */
    </style>
</head>
<body class="bg-gradient-animate min-h-screen">
    <div class="shard w-64 h-64 top-20 left-[5%]"></div>
    <div class="shard w-96 h-96 bottom-10 right-[2%]" style="animation-delay: -2s;"></div>

    <nav class="flex justify-between items-center p-8 sticky top-0 z-50">
        <div class="text-4xl font-black italic tracking-tighter">
            <a href="/"><span class="text-white">P3R</span><span class="text-blue-500">BLOG</span></a>
        </div>
        <div class="flex gap-4">
            <a href="/" class="slanted-box bg-white text-black px-6 py-1 hover:bg-blue-500 hover:text-white transition-all">
                <div class="slanted-content font-bold underline">RECALL</div>
            </a>
        </div>
    </nav>

    <%- body %>

    <footer class="mt-20 p-12 bg-blue-600 slanted-box -mb-10 ml-10">
        <div class="slanted-content text-right text-white italic font-bold">
            <p>© <%= new Date().getFullYear() %> OPERATION MEMENTO. </span> // ARCHIVE BY <%= config.author %></p>
        </div>
    </footer>

    <div class="bg-black pt-16 pb-12 overflow-hidden border-t-4 border-blue-400 relative z-10">
        <div class="container mx-auto px-8">
            <div class="flex items-center gap-4 mb-6">
                <h3 class="text-blue-500 font-black italic text-2xl tracking-tighter uppercase">S.Link Contacts</h3>
                <div class="h-[2px] flex-1 bg-gradient-to-r from-blue-500 to-transparent"></div>
            </div>

            <div class="flex flex-wrap gap-6 justify-end">
                <% (config.friends || []).forEach(function(friend){ %>
                    <a href="<%= friend.url %>" target="_blank" class="group relative">
                        <div class="flex items-center gap-3 bg-white/5 px-4 py-2 border-r-4 border-transparent group-hover:border-blue-500 group-hover:bg-white transition-all duration-300 transform -skew-x-12">
                            <div class="flex items-center gap-3 transform skew-x-12">
                                <span class="text-blue-400 font-mono text-[10px] group-hover:text-blue-600">RANK MAX</span>
                                <span class="text-white group-hover:text-black font-bold italic tracking-tight uppercase text-sm">
                                    <%= friend.name %>
                                </span>
                            </div>
                        </div>
                    </a>
                <% }) %>
            </div>
        </div>
        
        <div class="absolute -bottom-4 -left-4 text-white/5 text-8xl font-black italic select-none pointer-events-none">
            SOCIAL LINKS
        </div>
    </div>
</body>
</html>
